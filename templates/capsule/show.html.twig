{% extends 'base.html.twig' %}

{% block title %}Capsule{% endblock %}

{% block body %}
<div class="container mt-4">
    <h1>ðŸ”Ž DÃ©tails de la Capsule</h1>

    <table class="table table-bordered mt-3">
        <tbody>
            <tr>
                <th style="width: 200px;">Titre</th>
                <td>{{ capsule.title }}</td>
            </tr>
            <tr>
                <th>Message</th>
                <td>{{ capsule.content|nl2br }}</td>
            </tr>
            <tr>
                <th>Date d'ouverture</th>
                <td>{{ capsule.sendDate ? capsule.sendDate|date('d/m/Y H:i') : '' }}</td>
            </tr>
            <tr>
                <th>Destinataire</th>
                <td>{{ capsule.targetEmail }}</td>
            </tr>
            <tr>
                <th>Statut</th>
                <td>
                    {% if capsule.isSent %}
                        <span class="badge bg-success">EnvoyÃ©e</span>
                    {% else %}
                        <span class="badge bg-secondary">En attente</span>
                    {% endif %}
                </td>
            </tr>
            <tr>
                <th>Image Souvenir</th>
                <td>
                    {% if capsule.imageFilename %}
                        <img src="{{ asset('uploads/' ~ capsule.imageFilename) }}"
                             alt="Souvenir"
                             class="img-fluid rounded shadow"
                             style="max-width: 400px;">
                    {% else %}
                        <span class="text-muted">Aucune image jointe.</span>
                    {% endif %}
                </td>
            </tr>
            <tr>
                <th>CrÃ©Ã©e le</th>
                <td>{{ capsule.createdAt ? capsule.createdAt|date('d/m/Y H:i') : '' }}</td>
            </tr>
        </tbody>
    </table>

    <div class="mt-3">
        <a href="{{ path('app_capsule_index') }}" class="btn btn-secondary">Retour Ã  la liste</a>

        {% if not capsule.isSent %}
            <a href="{{ path('app_capsule_edit', {'id': capsule.id}) }}" class="btn btn-warning">Modifier</a>
        {% endif %}
    </div>
</div>
{% endblock %}
